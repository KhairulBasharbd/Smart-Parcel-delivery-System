<!-- templates/fragments/navbar.html -->
<nav class="bg-white shadow">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
        <!-- Hamburger Menu -->
        <button id="menu-toggle" class="text-black focus:outline-none">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
                 viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>


        <!-- Profile Button -->
        <div class="relative">
            <button id="profile-menu-btn" class="px-2 py-1.5 bg-gray-800 text-white font-semibold rounded-md">
                Profile
            </button>
            <div id="profile-menu-dropdown"
                 class="hidden absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-md py-2">
                <a th:href="@{/user/profile-settings}" class="block px-4 py-2 text-gray-700 hover:bg-gray-200">Settings</a>
                <form id="logout-form" th:action="@{/logout}" method="POST" class="block">
                    <button type="submit"
                            class="w-full text-left px-4 py-2 text-gray-700 hover:bg-gray-200">
                        Sign Out
                    </button>
                </form>
            </div>
        </div>
    </div>
</nav>

<script>


    // Toggle profile dropdown
    document.getElementById('profile-menu-btn').addEventListener('click', function () {
        document.getElementById('profile-menu-dropdown').classList.toggle('hidden');
    });

    // Close dropdowns when clicking outside
    document.addEventListener('click', function (event) {
        const menu = document.getElementById('menu-dropdown');
        const profileMenu = document.getElementById('profile-menu-dropdown');

        const profileButton = document.getElementById('profile-menu-btn');

        if (!menuButton.contains(event.target) && !menu.contains(event.target)) {
            menu.classList.add('hidden');
        }

        if (!profileButton.contains(event.target) && !profileMenu.contains(event.target)) {
            profileMenu.classList.add('hidden');
        }
    });
</script>